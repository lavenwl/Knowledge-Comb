### 原型模式

> 参考文档： [原型模式与建造者模式详解.pdf](source/原型模式与建造者模式详解.pdf) 

是指原型实例指定创建对象的种类, 并且通过拷贝这些原型创建新的对象, 属于创建型模式.

> 原型模式适用于以下几个场景
>
> 1. 类初始化消耗资源较多
> 2. new产生的一个对象需要非常复杂的过程\(数据准备, 访问权限等\)
> 3. 构造函数比较复杂
> 4. 循环体中产生大量对象
>
> 优点: 
> * 性能好, Java自带原型模式, 基于二进制流的拷贝,比直接new一个对象性能提升
> * 可以使用申客隆的方式保存对象状态,简化创建对象的过程,
>
> 缺点:
> * 需要每一个类配置一个克隆方法
> * 克隆方法在类内部, 违反开闭原则
> * 实现深克隆时, 对于对象嵌套比较深的对象来说, 所有级别的对象都要实现深度克隆方法

### 什么是建造者模式

将一个复杂对象的构建过程与他的表示分离, 使同样的构建过程可以创建不同的表示, 属于创建型模式

> 建造者模式的应用场景
>
> 1. 相同的方法, 不同的执行顺序, 产生不同的结果
> 2. 多个部件或零件, 都可以装配到一个对象中, 但是产生的结果又不相同
> 3. 产品类非诚复杂, 或者产品类中的调用顺序不同产生不同的作用.
> 4. 当初始化一个对象特别复杂,参数多,而且很多参数都具有默认值时.
>
> 优点:
> * 封装性好, 创建使用分离
> * 扩展性好, 建造类之间独立, 一定程度上解耦
>
> 缺点:
> * 产生多余的Builder对象
> * 产品内部发生变化,建造者都要修改, 成本较大

### 建造者模式在源码中的应用

```java
// JDK 
String s = new StringBuilder().append("1").append("2").toString();
// Mybatis
SqlSessionFactory f = new SqlSessionFactoryBuilder().build();
// Spring
BeanDefinition bd = new BeanDefinitionBuilder().getBeanDefinition();

```



